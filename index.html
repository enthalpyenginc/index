<!doctype html>
<html lang="en-CA">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Enthalpy Engineering | Design, Contract Administration, Building Performance, Sustainability &amp; Energy Management</title>

  <!-- Canonical URL -->
  <link rel="canonical" href="https://enthalpyinc.com/" />

  <!-- Basic SEO -->
  <meta name="description" content="Enthalpy Engineering Incorporated is a partner-led firm specializing in building performance, energy management, and project delivery across Canada and the United States." />
  <meta name="robots" content="index, follow" />
  <meta name="theme-color" content="#050608" />

  <!-- Security & compliance (Note: best set as HTTP response headers) -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />

  <!-- Optional CSP fallback (best set as an HTTP header; adjust origins as needed) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'none';
    img-src 'self' https: data:;
    media-src 'self' https:;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    font-src 'self' https://fonts.gstatic.com data:;
    script-src 'self' 'unsafe-inline' https://www.gstatic.com;
    connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://firebasestorage.googleapis.com https://www.google-analytics.com;
    frame-src https://www.google.com;
    form-action 'self' https://formsubmit.co;
    upgrade-insecure-requests;
  " />

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

  <!-- Social (works across Facebook/Messenger/WhatsApp/LinkedIn/Slack/Discord/iMessage + X/Twitter) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Enthalpy Engineering" />
  <meta property="og:title" content="Enthalpy Engineering | Building Performance &amp; Energy Management" />
  <meta property="og:description" content="High-performance engineering for the built environment across Canada and the United States." />
  <meta property="og:url" content="https://enthalpyinc.com/" />
  <meta property="og:locale" content="en_CA" />

  <!-- Primary (landscape) share image -->
  <meta property="og:image" content="https://enthalpyinc.com/og-image.jpg" />
  <meta property="og:image:secure_url" content="https://enthalpyinc.com/og-image.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Enthalpy Engineering Incorporated logo" />

  <!-- Optional square fallback (upload og-image-square.jpg to use this) -->
  <meta property="og:image" content="https://enthalpyinc.com/og-image-square.jpg" />
  <meta property="og:image:secure_url" content="https://enthalpyinc.com/og-image-square.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="1200" />
  <meta property="og:image:alt" content="Enthalpy Engineering Incorporated logo" />

  <!-- Twitter/X -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Enthalpy Engineering | Building Performance &amp; Energy Management" />
  <meta name="twitter:description" content="High-performance engineering for the built environment across Canada and the United States." />
  <meta name="twitter:image" content="https://enthalpyinc.com/og-image.jpg" />
  <meta name="twitter:image:alt" content="Enthalpy Engineering Incorporated logo" />

  <!-- Performance: preconnect + preload for critical image -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="image" href="enthalpy-logo.png" fetchpriority="high" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Enthalpy Engineering Incorporated",
    "url": "https://enthalpyinc.com",
    "logo": "https://enthalpyinc.com/enthalpy-logo.png",
    "email": "info@enthalpyinc.com",
    "telephone": "+1-778-945-2781",
    "address": {
      "@type": "PostalAddress",
      "name": "Canada Place Business Centre",
      "streetAddress": "#404 – 999 Canada Place",
      "addressLocality": "Vancouver",
      "addressRegion": "BC",
      "postalCode": "V6C 3E2",
      "addressCountry": "CA"
    },
    "areaServed": ["CA", "US"],
    "contactPoint": [
      {
        "@type": "ContactPoint",
        "contactType": "sales",
        "email": "john@enthalpyinc.com",
        "telephone": "+1-778-945-2781",
        "areaServed": ["CA", "US"],
        "availableLanguage": ["English"]
      },
      {
        "@type": "ContactPoint",
        "contactType": "customer support",
        "email": "info@enthalpyinc.com",
        "telephone": "+1-778-945-2781",
        "areaServed": ["CA", "US"],
        "availableLanguage": ["English"]
      }
    ],
    "sameAs": [
      "https://www.linkedin.com/company/enthalpy-engineering"
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Enthalpy Engineering",
    "url": "https://enthalpyinc.com"
  }
  </script>

  <style>
    :root {
      --gold: #d4a53a;
      --gold-dark: #b18a30;
      --black: #050608;
      --gray-100: #f7f7f9;
      --gray-300: #d0d4dd;
      --gray-500: #9ca3af;
      --gray-600: #6b7280;
      --white: #ffffff;
      --accent: #0f766e;
      --max-width: 1120px;
      --radius-lg: 14px;
      --shadow-soft: 0 18px 40px rgba(4, 4, 10, 0.25);
      --transition: 0.25s ease;
      --focus-ring: 0 0 0 2px rgba(212, 165, 58, 0.55);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: var(--black);
      color: var(--white);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      position: relative;
    }

    img { max-width: 100%; display: block; }
    a { text-decoration: none; color: inherit; }

    /* Visible focus styles */
    a:focus-visible,
    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible,
    .image-frame:focus-visible {
      outline: none;
      box-shadow: var(--focus-ring);
      border-radius: 10px;
    }

    /* Scroll progress bar */
    .scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      width: 0;
      background: linear-gradient(90deg, var(--gold), var(--accent));
      z-index: 40;
      transform-origin: left center;
      pointer-events: none;
    }

    /* Background video behind page */
    .video-bg {
      position: fixed;
      inset: 0;
      z-index: -10;
      overflow: hidden;
      pointer-events: none;
      background: #050608;
    }

    .video-bg video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      filter: brightness(0.92) contrast(1.02) saturate(1.05);
    }

    @media (prefers-reduced-motion: reduce) {
      .video-bg video { display: none !important; }
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 0;
      background: radial-gradient(
        circle at top left,
        rgba(30, 34, 46, 0.25) 0,
        rgba(10, 12, 18, 0.75) 55%
      );
    }

    .container {
      width: 100%;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    section[id] { scroll-margin-top: 88px; }

    /* Skip link */
    .skip-link {
      position: absolute;
      left: -999px;
      top: 0;
      padding: 0.5rem 1rem;
      background: var(--gold);
      color: #050608;
      z-index: 999;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .skip-link:focus { left: 1rem; top: 1rem; }

    /* Header & Nav */
    header {
      position: sticky;
      top: 0;
      z-index: 30;
      backdrop-filter: blur(18px);
      background: linear-gradient(to bottom, rgba(5, 6, 8, 0.96), rgba(5, 6, 8, 0.92));
      border-bottom: 1px solid rgba(212, 165, 58, 0.15);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 2rem;
      padding: 0.85rem 0;
    }

    .nav-left { display: flex; align-items: center; gap: 0.75rem; }

    .nav-left-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: inherit;
    }

    .logo-mark {
      width: 52px;
      height: 52px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.7);
      background: #000;
      flex: 0 0 52px;
    }

    .logo-mark img { width: 100%; height: 100%; object-fit: cover; }

    .logo-text-main {
      font-weight: 600;
      letter-spacing: 0.2em;
      font-size: 0.85rem;
      text-transform: uppercase;
    }

    .logo-text-sub {
      font-size: 0.7rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--gray-600);
    }

    .logo-text-tagline {
      font-size: 0.58rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.55);
      margin-top: 0.15rem;
      line-height: 1.05;
      white-space: nowrap;
    }

    /* Desktop nav */
    .nav-links {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .nav-links a {
      color: var(--gray-300);
      position: relative;
      padding-bottom: 0.15rem;
    }

    .nav-links a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background: var(--gold);
      transition: var(--transition);
    }

    .nav-links a:hover::after { width: 100%; }

    .nav-cta { display: flex; align-items: center; gap: 0.75rem; }

    .btn {
      border-radius: 999px;
      padding: 0.55rem 1.4rem;
      border: 1px solid transparent;
      font-size: 0.8rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      font-weight: 500;
      cursor: pointer;
      background: none;
      color: inherit;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      line-height: 1;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      color: #050608;
      box-shadow: 0 10px 25px rgba(212, 165, 58, 0.55);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 32px rgba(212, 165, 58, 0.7);
    }

    .btn-ghost {
      border-color: rgba(212, 165, 58, 0.4);
      color: var(--gray-300);
    }

    .btn-ghost:hover {
      border-color: var(--gold);
      color: var(--gold);
      background: rgba(212, 165, 58, 0.04);
    }

    .btn-sm {
      padding: 0.4rem 1rem;
      font-size: 0.72rem;
      letter-spacing: 0.16em;
    }

    .nav-toggle { display: none; flex-direction: column; gap: 4px; cursor: pointer; background:none; border:0; }

    .nav-toggle span {
      width: 20px;
      height: 2px;
      background: var(--gray-300);
      border-radius: 999px;
      transition: var(--transition);
      display:block;
    }

    .nav-mobile-open .nav-toggle span:nth-child(1) { transform: translateY(6px) rotate(45deg); }
    .nav-mobile-open .nav-toggle span:nth-child(2) { opacity: 0; }
    .nav-mobile-open .nav-toggle span:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

    /* Mobile menu container */
    .mobile-menu { display: none; }

    @media (max-width: 880px) {
      .nav-links, .nav-cta { display: none; }
      .nav-toggle { display: flex; }

      header.nav-mobile-open .mobile-menu {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        background: rgba(5, 6, 8, 0.98);
        position: absolute;
        left: 0;
        right: 0;
        top: 100%;
        padding: 0.75rem 1.5rem 1rem;
        gap: 0.9rem;
        border-bottom: 1px solid rgba(212, 165, 58, 0.18);
      }

      header.nav-mobile-open .mobile-menu .nav-links,
      header.nav-mobile-open .mobile-menu .nav-cta {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.85rem;
      }

      header.nav-mobile-open .mobile-menu .nav-cta {
        width: 100%;
        padding-top: 0.25rem;
      }
    }

    /* Hero */
    .hero { padding: 4rem 0 3rem; position: relative; }

    @media (min-width: 1200px) {
      .hero { padding: 4.75rem 0 4rem; }
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(5, 6, 8, 0.18), rgba(5, 6, 8, 0.45));
      z-index: -1;
    }

    .hero-inner { display: grid; gap: 3rem; align-items: center; }

    @media (min-width: 900px) {
      .hero-inner { grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr); }
    }

    .eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.2em;
      font-size: 0.76rem;
      color: var(--gray-300);
      margin-bottom: 0.75rem;
    }

    .hero h1 {
      font-size: clamp(2.6rem, 4vw, 3.3rem);
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin-bottom: 1rem;
    }

    .hero h1 span.accent { color: var(--gold); }

    .hero-lede {
      max-width: 34rem;
      color: #e5e7eb;
      font-size: 0.98rem;
      margin-bottom: 1.8rem;
    }

    .hero-actions { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.8rem; }

    .hero-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1.8rem;
      font-size: 0.8rem;
      color: var(--gray-300);
    }

    .hero-meta strong {
      display: block;
      color: var(--gray-100);
      font-size: 1rem;
      margin-bottom: 0.1rem;
    }

    .hero-panel {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, rgba(212, 165, 58, 0.18), rgba(8, 10, 20, 0.96));
      padding: 1.8rem 1.6rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(212, 165, 58, 0.35);
      position: relative;
      overflow: hidden;
    }

    .hero-panel h2 {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--gray-300);
      margin-bottom: 0.8rem;
    }

    .hero-metric-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1.2rem;
      margin-bottom: 1.2rem;
    }

    .metric { font-size: 0.8rem; color: var(--gray-600); }

    .metric strong {
      display: block;
      font-size: 1.35rem;
      color: var(--gold);
      margin-bottom: 0.1rem;
    }

    .hero-panel-note { font-size: 0.75rem; color: var(--gray-600); }

    /* Sections */
    section { padding: 3.5rem 0; }
    section:nth-of-type(even) { background: rgba(15, 18, 28, 0.9); }

    .section-header {
      margin-bottom: 2.4rem;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .section-header h2 {
      font-size: 1.6rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .section-header p {
      max-width: 34rem;
      font-size: 0.95rem;
      color: var(--gray-300);
    }

    /* Services */
    .card-grid { display: grid; gap: 1.5rem; }

    @media (min-width: 720px) {
      .card-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    .card {
      background: linear-gradient(145deg, #0c0f17, #151823);
      border-radius: 16px;
      padding: 1.4rem 1.35rem 1.5rem;
      border: 1px solid rgba(212, 165, 58, 0.16);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45);
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background 0.3s ease;
      position: relative;
      overflow: hidden;
      content-visibility: auto;
      contain-intrinsic-size: 260px;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      border-color: rgba(212, 165, 58, 0.35);
      background: linear-gradient(150deg, #101425, #191d2c);
    }

    .card h3 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .card p {
      font-size: 0.86rem;
      color: var(--gray-300);
      margin-bottom: 0.75rem;
    }

    .pill-list { display: flex; flex-wrap: wrap; gap: 0.35rem; }

    .pill {
      border-radius: 999px;
      background: rgba(15, 118, 110, 0.12);
      color: var(--gray-300);
      font-size: 0.7rem;
      padding: 0.18rem 0.6rem;
      border: 1px solid rgba(15, 118, 110, 0.5);
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.35s ease-out, transform 0.35s ease-out;
      transition-delay: var(--pill-delay, 0s);
    }

    #services.services-pills-visible .pill { opacity: 1; transform: none; }

    /* Simple cards */
    .simple-grid { display: grid; gap: 1.25rem; }

    @media (min-width: 720px) {
      .simple-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .simple-card {
      background: #0b0d14;
      border-radius: 14px;
      padding: 1.1rem 1.2rem 1.2rem;
      border: 1px solid rgba(148, 163, 184, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background 0.3s ease;
      position: relative;
      overflow: hidden;
      content-visibility: auto;
      contain-intrinsic-size: 320px;
    }

    .simple-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.55);
      border-color: rgba(148, 163, 184, 0.4);
      background: #101321;
    }

    .simple-card h3 {
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      margin-bottom: 0.3rem;
    }

    .simple-card p { font-size: 0.84rem; color: var(--gray-300); margin-bottom: 0.4rem; }
    .simple-card span { font-size: 0.76rem; color: var(--gray-600); }

    /* Company profile */
    .company-profile { margin-bottom: 2rem; }

    .company-profile h3 {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      margin-bottom: 0.4rem;
    }

    .company-profile .company-toggle { margin-top: 0.6rem; }

    /* ========= COOL PROJECT IMAGE PANNING (even grid + reset icon) ========= */
    .simple-card .image-frame{
      width: 100%;
      height: 220px; /* even grid */
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 0.6rem;
      border: 1px solid rgba(148, 163, 184, 0.22);
      background: #050608;
      position: relative;
      touch-action: none;
    }

    .simple-card img.project-image{
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: var(--posx, 50%) var(--posy, 50%);
      user-select: none;
      -webkit-user-drag: none;
      cursor: grab;
      transition: transform 0.2s ease, filter 0.2s ease;
    }

    @media (pointer:fine){
      .simple-card .image-frame:hover img.project-image{
        transform: scale(1.02);
        filter: saturate(1.02);
      }
    }
    .simple-card img.project-image:active{ cursor: grabbing; }

    /* Hint bubble (first-time discoverability) */
    .pan-hint{
      position: absolute;
      left: 12px;
      bottom: 12px;
      font-size: 0.68rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.75);
      background: rgba(5,6,8,0.55);
      border: 1px solid rgba(212,165,58,0.25);
      padding: 0.35rem 0.55rem;
      border-radius: 999px;
      backdrop-filter: blur(10px);
      pointer-events: none;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }
    @media (pointer:fine){
      .simple-card .image-frame:hover .pan-hint{
        opacity: 1;
        transform: none;
      }
    }
    @media (pointer:coarse){
      .pan-hint{ opacity: 0.9; transform: none; }
    }

    /* Reset icon button */
    .pan-reset{
      position: absolute;
      top: 10px;
      right: 10px;
      width: 36px;
      height: 36px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      background: rgba(5,6,8,0.55);
      border: 1px solid rgba(212,165,58,0.25);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,0.92);
      cursor: pointer;
      pointer-events: auto;
      opacity: 0;
      transform: translateY(-4px);
      transition: opacity 0.2s ease, transform 0.2s ease, border-color 0.2s ease;
    }
    .pan-reset svg{ width: 18px; height: 18px; display:block; }
    .pan-reset:hover{ border-color: rgba(212,165,58,0.55); }

    /* Show reset on hover (desktop) and whenever image has been panned */
    @media (pointer:fine){
      .image-frame:hover .pan-reset{
        opacity: 1;
        transform: none;
      }
    }
    .image-frame.is-panned .pan-reset{
      opacity: 1;
      transform: none;
    }

    .project-outcome {
      display: block;
      font-size: 0.78rem;
      color: var(--gray-500);
      margin-top: 0.15rem;
    }

    /* Team */
    .team-grid { display: grid; gap: 1.4rem; }

    @media (min-width: 780px) {
      .team-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    }

    .team-card {
      background: #0b0d14;
      border-radius: 14px;
      padding: 1rem 1rem 1.1rem;
      border: 1px solid rgba(148, 163, 184, 0.22);
      font-size: 0.8rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background 0.3s ease;
      position: relative;
      overflow: hidden;
      content-visibility: auto;
      contain-intrinsic-size: 260px;
    }

    .team-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.55);
      border-color: rgba(148, 163, 184, 0.4);
      background: #111525;
    }

    .team-avatar {
      width: 52px;
      height: 52px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      margin-bottom: 0.6rem;
      overflow: hidden;
    }

    .team-avatar img { width: 100%; height: 100%; border-radius: 999px; object-fit: cover; }

    .team-card h3 { font-size: 0.9rem; margin-bottom: 0.1rem; }
    .team-role { font-size: 0.76rem; color: var(--gray-600); margin-bottom: 0.4rem; }
    .team-card p { font-size: 0.76rem; color: var(--gray-300); }

    /* Careers */
    .careers {
      background: linear-gradient(120deg, #050608, #101322);
      border-top: 1px solid rgba(212, 165, 58, 0.18);
      border-bottom: 1px solid rgba(212, 165, 58, 0.18);
    }

    .careers-inner { display: grid; gap: 2rem; align-items: center; }

    @media (min-width: 860px) {
      .careers-inner { grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr); }
    }

    .tag {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      color: var(--gray-600);
      margin-bottom: 0.5rem;
    }

    .careers h2 {
      font-size: 1.45rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      margin-bottom: 0.8rem;
    }

    .careers p { font-size: 0.9rem; color: var(--gray-300); margin-bottom: 1.2rem; }

    .careers-list { list-style: none; font-size: 0.82rem; color: var(--gray-300); }

    .careers-list li {
      margin-bottom: 0.4rem;
      display: flex;
      align-items: baseline;
      gap: 0.4rem;
    }

    .careers-list span.bullet {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--gold);
      margin-top: 4px;
    }

    /* Contact */
    .contact-grid { display: grid; gap: 2rem; }

    @media (min-width: 860px) {
      .contact-grid { grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr); }
    }

    .contact-card {
      background: #0b0d14;
      border-radius: 16px;
      padding: 1.5rem 1.4rem 1.6rem;
      border: 1px solid rgba(148, 163, 184, 0.3);
      position: relative;
      overflow: hidden;
      content-visibility: auto;
      contain-intrinsic-size: 380px;
    }

    .contact-card h3 {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 0.7rem;
    }

    .contact-card p { font-size: 0.86rem; color: var(--gray-300); margin-bottom: 0.8rem; }

    .contact-meta { font-size: 0.84rem; color: var(--gray-300); }
    .contact-meta a { color: var(--gold); }

    form { display: grid; gap: 0.9rem; }

    label {
      font-size: 0.75rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--gray-600);
      display: block;
      margin-bottom: 0.2rem;
    }

    input, textarea {
      width: 100%;
      padding: 0.55rem 0.7rem;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: #050608;
      color: var(--white);
      font-size: 0.86rem;
      font-family: inherit;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(212, 165, 58, 0.5);
    }

    textarea { min-height: 130px; resize: vertical; }
    .mb-1_5 { margin-bottom: 1.5rem; }

    /* Map embed */
    .map-embed {
      margin-top: 0.75rem;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .map-embed iframe { width: 100%; height: 220px; border: 0; display: block; }

    /* ======= LOCATION HERO ADD-ON (APPLIED) ======= */
    .location-hero-link { display: block; }
    .location-hero {
      position: relative;
      width: 100%;
      height: 190px;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 0.95rem;
      border: 1px solid rgba(148, 163, 184, 0.22);
      background: #050608;
    }
    .location-hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      transform: scale(1.01);
      transition: transform 0.35s ease, filter 0.35s ease;
      filter: saturate(1.02) contrast(1.04) brightness(0.92);
    }
    .location-hero-overlay {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 15% 20%, rgba(212,165,58,0.18), transparent 50%),
        linear-gradient(to top, rgba(5,6,8,0.82), rgba(5,6,8,0.12));
      pointer-events: none;
    }
    .location-badge {
      position: absolute;
      left: 12px;
      bottom: 12px;
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      padding: 0.35rem 0.6rem;
      border-radius: 999px;
      background: rgba(5,6,8,0.58);
      border: 1px solid rgba(212,165,58,0.25);
      color: rgba(255,255,255,0.86);
      font-size: 0.68rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      backdrop-filter: blur(10px);
      pointer-events: none;
    }
    .location-badge .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--gold), var(--accent));
      box-shadow: 0 0 0 2px rgba(5,6,8,0.65);
    }
    @media (pointer:fine) {
      .location-hero-link:hover .location-hero img {
        transform: scale(1.05);
        filter: saturate(1.05) contrast(1.08) brightness(0.96);
      }
    }
    /* ======= END LOCATION HERO ADD-ON ======= */

    /* ===== How we work (interactive stepper) ===== */
    .process-shell{
      display:grid;
      gap: 1.25rem;
      background: linear-gradient(145deg, #0c0f17, #151823);
      border-radius: 16px;
      border: 1px solid rgba(212,165,58,0.18);
      box-shadow: 0 14px 34px rgba(0,0,0,0.55);
      overflow:hidden;
    }

    @media (min-width: 980px){
      .process-shell{ grid-template-columns: minmax(0, 0.92fr) minmax(0, 1.08fr); }
    }

    .process-tabs{
      display:flex;
      flex-direction:column;
      gap: .25rem;
      padding: 1.1rem;
      background: rgba(5,6,8,0.55);
      border-right: 1px solid rgba(212,165,58,0.10);
    }

    .process-tab{
      width:100%;
      text-align:left;
      border: 1px solid rgba(148,163,184,0.18);
      background: rgba(5,6,8,0.45);
      border-radius: 14px;
      padding: .85rem .9rem;
      cursor:pointer;
      transition: var(--transition);
      display:grid;
      grid-template-columns: 54px 1fr;
      gap: .35rem .75rem;
      align-items:center;
    }

    .process-tab:hover{
      border-color: rgba(212,165,58,0.32);
      background: rgba(16,19,33,0.75);
    }

    .process-tab.is-active{
      border-color: rgba(212,165,58,0.5);
      background: radial-gradient(circle at top left, rgba(212,165,58,0.12), rgba(8,10,20,0.92));
      box-shadow: 0 12px 26px rgba(0,0,0,0.45);
    }

    .process-stepnum{
      font-size: .8rem;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      grid-row: 1 / span 2;
    }

    .process-steptitle{
      font-size: .9rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--gray-100);
    }

    .process-stepsub{
      font-size: .76rem;
      color: var(--gray-600);
    }

    .process-panel{
      padding: 1.35rem 1.35rem 1.4rem;
      background: radial-gradient(circle at 15% 20%, rgba(212,165,58,0.10), transparent 55%),
                linear-gradient(150deg, #0c0f17, #141827);
    }

    .process-panel h3{
      font-size: 1.05rem;
      text-transform: uppercase;
      letter-spacing: .14em;
      margin-bottom: .45rem;
    }

    .process-panel p{
      color: var(--gray-300);
      font-size: .9rem;
      max-width: 44rem;
    }

    .process-grid{
      display:grid;
      gap: 1rem;
      margin-top: 1.15rem;
    }

    @media (min-width: 720px){
      .process-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }

    .process-box{
      background: rgba(5,6,8,0.55);
      border: 1px solid rgba(148,163,184,0.2);
      border-radius: 14px;
      padding: 1rem 1rem 1.05rem;
    }

    .process-box h4{
      font-size: .78rem;
      text-transform: uppercase;
      letter-spacing: .18em;
      color: var(--gray-300);
      margin-bottom: .6rem;
    }

    .process-box ul{
      list-style:none;
      display:grid;
      gap: .45rem;
    }

    .process-box li{
      display:flex;
      gap: .55rem;
      align-items:flex-start;
      font-size: .84rem;
      color: var(--gray-300);
    }

    .process-box li::before{
      content:"";
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--gold), var(--accent));
      margin-top: .45rem;
      flex: 0 0 7px;
    }

    .process-cta{
      margin-top: 1.1rem;
      display:flex;
      flex-wrap:wrap;
      gap: .6rem;
    }

    /* ===== Smart intake form ===== */
    .form-grid{
      display:grid;
      gap: 0.9rem;
    }

    @media (min-width: 720px){
      .form-grid{
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.9rem 1rem;
      }
      .form-grid .span-2{ grid-column: 1 / -1; }
    }

    select{
      width: 100%;
      padding: 0.55rem 0.7rem;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: #050608;
      color: var(--white);
      font-size: 0.86rem;
      font-family: inherit;
    }

    select:focus{
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(212, 165, 58, 0.5);
    }

    .form-actions-row{
      margin-top: .55rem;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap: .45rem;
    }

    .form-helper{
      font-size: .75rem;
      color: var(--gray-600);
      letter-spacing: .02em;
    }

    /* Footer */
    footer {
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      background: #050608;
      padding: 1.4rem 0 1.6rem;
      font-size: 0.76rem;
      color: var(--gray-600);
    }

    .footer-inner {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.8rem;
    }

    .footer-links { display: flex; flex-wrap: wrap; gap: 1.1rem; }
    .footer-links a { color: var(--gray-500); }

    @media (max-width: 600px) {
      .hero { padding-top: 3rem; }
      .hero-panel { margin-top: -0.5rem; }
      .cookie-banner { padding: 0.9rem 1rem 1rem; }
      .cookie-banner-inner { flex-direction: column; align-items: flex-start; }
      .cookie-actions { width: 100%; justify-content: flex-start; }
      .logo-text-sub, .tag { letter-spacing: 0.18em; }
    }

    /* Cookie banner / dialog */
    .cookie-banner {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
      background: rgba(5, 6, 8, 0.98);
      border-top: 1px solid rgba(212, 165, 58, 0.3);
      padding: 0.85rem 1.25rem;
      display: none;
    }

    .cookie-banner-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.75rem;
      justify-content: space-between;
    }

    .cookie-text {
      font-size: 0.78rem;
      color: var(--gray-300);
      flex: 1 1 220px;
    }

    .cookie-actions { display: flex; flex-wrap: wrap; gap: 0.4rem; }

    /* Scroll reveal – sections */
    .reveal {
      opacity: 0;
      transform: translateY(18px);
      transition: opacity 0.55s ease-out, transform 0.55s ease-out;
    }
    .reveal.is-visible { opacity: 1; transform: none; }

    /* Scroll reveal – staggered items */
    .reveal-item {
      opacity: 0;
      transform: translateY(16px);
      transition: opacity 0.45s ease-out, transform 0.45s ease-out;
      transition-delay: var(--reveal-delay, 0s);
    }
    .reveal-item.is-visible { opacity: 1; transform: none; }

    /* Shared parallax layers */
    .parallax-layer { will-change: transform; transition: transform 0.25s ease-out; }

    /* Spotlight hover */
    .card::before,
    .simple-card::before,
    .team-card::before,
    .contact-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(
        circle at var(--mx, 50%) var(--my, 50%),
        rgba(212, 165, 58, 0.16),
        transparent 55%
      );
      opacity: 0;
      transition: opacity 0.3s ease-out;
      pointer-events: none;
    }

    .card:hover::before,
    .simple-card:hover::before,
    .team-card:hover::before,
    .contact-card:hover::before { opacity: 1; }
  </style>
</head>

<body>
  <!-- Scroll progress bar -->
  <div class="scroll-progress" aria-hidden="true"></div>

  <!-- BACKGROUND VIDEO -->
  <div class="video-bg" aria-hidden="true">
    <video
      id="bgVideo"
      autoplay
      muted
      loop
      playsinline
      preload="metadata"
      poster="/hero-vancouver-poster.jpg"
    >
      <source src="https://enthalpyinc.com/hero-vancouver.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>

  <div class="page">
    <a href="#main" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header id="top">
      <div class="container nav">
        <div class="nav-left">
          <a href="/" class="nav-left-link" aria-label="Enthalpy Engineering home">
            <div class="logo-mark">
              <img
                src="enthalpy-logo.png"
                alt="Enthalpy Engineering Incorporated logo"
                width="52"
                height="52"
                decoding="async"
                fetchpriority="high"
              />
            </div>
            <div>
              <div class="logo-text-main">ENTHALPY ENGINEERING</div>
              <div class="logo-text-sub">INCORPORATED</div>
              <div class="logo-text-tagline">Engineering Performance That Lasts</div>
            </div>
          </a>
        </div>

        <!-- Desktop nav -->
        <nav class="nav-links" aria-label="Primary navigation (desktop)">
          <a href="#services">Services</a>
          <a href="#markets">Markets</a>
          <a href="#process">Process</a>
          <a href="#projects">Projects</a>
          <a href="#team">Team</a>
          <a href="#careers">Careers</a>
          <a href="#contact">Contact</a>
        </nav>

        <div class="nav-cta">
          <a class="btn btn-ghost" href="#projects">Portfolio</a>
          <a class="btn btn-primary" href="#contact">Let’s Talk</a>
        </div>

        <!-- Mobile toggle -->
        <button
          class="nav-toggle"
          id="navToggle"
          type="button"
          aria-label="Toggle navigation"
          aria-expanded="false"
          aria-controls="mobileMenu"
        >
          <span></span><span></span><span></span>
        </button>
      </div>

      <!-- Mobile menu (focus-managed) -->
      <div class="mobile-menu" id="mobileMenu" hidden>
        <nav class="nav-links" aria-label="Primary navigation (mobile)">
          <a href="#services">Services</a>
          <a href="#markets">Markets</a>
          <a href="#process">Process</a>
          <a href="#projects">Projects</a>
          <a href="#team">Team</a>
          <a href="#careers">Careers</a>
          <a href="#contact">Contact</a>
        </nav>

        <div class="nav-cta" aria-label="Primary actions">
          <a class="btn btn-ghost" href="#projects">Portfolio</a>
          <a class="btn btn-primary" href="#contact">Let’s Talk</a>
        </div>
      </div>
    </header>

    <main id="main">
      <!-- Hero -->
      <section class="hero reveal">
        <div class="container hero-inner">
          <div>
            <div class="eyebrow">Design • Contract Administration • Energy Management • Building Performance • Sustainability</div>
            <h1>
              High-performance <span class="accent">engineering</span> for the built environment.
            </h1>
            <p class="hero-lede">
              Enthalpy Engineering Incorporated is a partner-led firm specializing in building performance,
              energy services, and project delivery. We help owners, designers and builders
              deliver resilient, efficient and comfortable buildings across Canada and the United States.
            </p>

            <div class="hero-actions">
              <a class="btn btn-primary" href="#contact">Start a project conversation</a>
              <a class="btn btn-ghost" href="#services">View services</a>
            </div>

            <div class="hero-meta">
              <div>
                <strong>Partner-delivered</strong>
                Every major assignment is led by one of our founding partners.
              </div>
              <div>
                <strong>Integrated approach</strong>
                Design, performance and constructability considered from day one.
              </div>
            </div>
          </div>

          <aside class="hero-panel parallax-layer" aria-label="Firm snapshot">
            <h2>Enthalpy at a glance</h2>
            <div class="hero-metric-grid">
              <div class="metric">
                <strong class="metric-value" data-target="4">0</strong>
                Founding partners leading the practice.
              </div>
              <div class="metric">
                <strong class="metric-value" data-target="2">0</strong>
                Countries served – Canada &amp; the United States.
              </div>
              <div class="metric">
                <strong class="metric-value" data-target="100" data-suffix="%">0%</strong>
                Independent, partner-owned firm.
              </div>
              <div class="metric">
                <strong>Scope</strong>
                Design, energy, building performance &amp; delivery.
              </div>
            </div>
            <p class="hero-panel-note">
              Our scope spans design and contract administration, building performance, energy management,
              LEED &amp; WELL consulting, and project management.
            </p>
          </aside>
        </div>
      </section>

      <!-- Services -->
      <section id="services" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>Services</h2>
            <p>
              Enthalpy Engineering provides a focused scope of services that connects design, delivery and building
              performance.
            </p>
          </header>

          <div class="card-grid reveal-stagger">
            <article class="card reveal-item">
              <h3>Design + Contract Administration</h3>
              <p>
                Mechanical engineering design and contract administration services from concept through tender and
                construction, with clear documentation and coordinated delivery.
              </p>
              <div class="pill-list">
                <span class="pill">Mechanical design</span>
                <span class="pill">Tender support</span>
                <span class="pill">Shop drawing review</span>
                <span class="pill">Site reviews</span>
              </div>
            </article>

            <article class="card reveal-item">
              <h3>Building performance</h3>
              <p>
                Building performance services to verify that systems operate as intended, support comfort and meet
                owner and code requirements.
              </p>
              <div class="pill-list">
                <span class="pill">Performance plans</span>
                <span class="pill">Field verification</span>
                <span class="pill">System oversight</span>
                <span class="pill">Deficiency tracking</span>
              </div>
            </article>

            <article class="card reveal-item">
              <h3>Energy Management</h3>
              <p>
                Strategic energy management for existing buildings and new projects, aligning performance targets,
                utility consumption and decarbonization goals.
              </p>
              <div class="pill-list">
                <span class="pill">Energy audits</span>
                <span class="pill">Utility analysis</span>
                <span class="pill">Optimization plans</span>
                <span class="pill">Decarbonization support</span>
              </div>
            </article>

            <article class="card reveal-item">
              <h3>LEED + WELL</h3>
              <p>
                Support for green building certifications, focusing on energy, comfort and wellness performance
                requirements in LEED and WELL frameworks.
              </p>
              <div class="pill-list">
                <span class="pill">LEED energy modelling</span>
                <span class="pill">WELL performance input</span>
                <span class="pill">Documentation support</span>
              </div>
            </article>

            <article class="card reveal-item">
              <h3>Project Management</h3>
              <p>
                Technical project management with an engineering lens, balancing scope, schedule, cost and risk
                for building and infrastructure projects.
              </p>
              <div class="pill-list">
                <span class="pill">Owner’s representative</span>
                <span class="pill">Schedule &amp; risk</span>
                <span class="pill">Cost tracking</span>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- Credentials & affiliations -->
      <section aria-label="Credentials and affiliations" class="reveal">
        <div class="container">
          <div class="simple-grid reveal-stagger">
            <article class="simple-card reveal-item">
              <h3>Credentials</h3>
              <p>
                Professional engineers with experience delivering projects under LEED, WELL and Fitwel frameworks
                across Canada and the United States.
              </p>
              <span>P.Eng • PE • PMP • LEED AP • WELL AP • Fitwel Ambassador • CEM • MCIBSE • MASHRAE • C.BuildE (UK) • Environmental Professional</span>
            </article>

            <article class="simple-card reveal-item">
              <h3>Affiliations &amp; programs</h3>
              <p>
                Experience with utility incentive programs, green building councils and institutional initiatives
                focused on decarbonization and high-performance buildings.
              </p>
              <span>Utility programs • Green building councils • Institutional portfolios</span>
            </article>
          </div>
        </div>
      </section>

      <!-- Markets -->
      <section id="markets" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>Markets</h2>
            <p>
              Enthalpy supports projects from early concept through operation, with a focus on high-performance
              multi-family, public and mission-critical facilities.
            </p>
          </header>

          <div class="simple-grid reveal-stagger">
            <article class="simple-card reveal-item">
              <h3>Multi-family &amp; mixed-use</h3>
              <p>
                Support for mid-rise and high-rise residential developments, including programs linked to energy
                performance and incentives.
              </p>
              <span>Developers • Asset managers • Project teams</span>
            </article>

            <article class="simple-card reveal-item">
              <h3>Public &amp; institutional</h3>
              <p>
                Support for municipalities, universities, schools and healthcare providers seeking resilient,
                low-carbon infrastructure.
              </p>
              <span>Municipalities • Universities • Health authorities</span>
            </article>

            <article class="simple-card reveal-item">
              <h3>Commercial &amp; workplace</h3>
              <p>
                High-performance offices, tenant improvements and workplace transformations aligned with ESG and
                wellness goals.
              </p>
              <span>Owners • Tenants • Corporate real estate</span>
            </article>

            <article class="simple-card reveal-item">
              <h3>Industrial &amp; mission-critical</h3>
              <p>
                Performance-driven projects where uptime, reliability and energy use are critical to operations.
              </p>
              <span>Manufacturing • Logistics • Specialized facilities</span>
            </article>

            <article class="simple-card reveal-item">
              <h3>Defense &amp; security</h3>
              <p>
                Support for secure, resilient facilities serving defense, public safety and critical government
                functions, with an emphasis on reliability, redundancy and discretion.
              </p>
              <span>Defense agencies • Public safety • Secure infrastructure</span>
            </article>
          </div>
        </div>
      </section>

      <!-- How we work -->
      <section id="process" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>How we work</h2>
            <p>
              A partner-led workflow designed to keep performance, constructability and long-term operations aligned from day one.
            </p>
          </header>

          <div class="process-shell reveal-item" aria-label="How we work">
            <div class="process-tabs" role="tablist" aria-label="Project workflow steps">
              <button type="button" class="process-tab is-active" role="tab" aria-selected="true" aria-controls="stepPanel" data-step="0">
                <span class="process-stepnum">01</span>
                <span class="process-steptitle">Discovery</span>
                <span class="process-stepsub">Goals, constraints, stakeholders</span>
              </button>

              <button type="button" class="process-tab" role="tab" aria-selected="false" aria-controls="stepPanel" data-step="1">
                <span class="process-stepnum">02</span>
                <span class="process-steptitle">Baseline</span>
                <span class="process-stepsub">Loads, systems, data, risks</span>
              </button>

              <button type="button" class="process-tab" role="tab" aria-selected="false" aria-controls="stepPanel" data-step="2">
                <span class="process-stepnum">03</span>
                <span class="process-steptitle">Options</span>
                <span class="process-stepsub">Compare pathways & impacts</span>
              </button>

              <button type="button" class="process-tab" role="tab" aria-selected="false" aria-controls="stepPanel" data-step="3">
                <span class="process-stepnum">04</span>
                <span class="process-steptitle">Delivery</span>
                <span class="process-stepsub">Documentation & coordination</span>
              </button>

              <button type="button" class="process-tab" role="tab" aria-selected="false" aria-controls="stepPanel" data-step="4">
                <span class="process-stepnum">05</span>
                <span class="process-steptitle">Verification</span>
                <span class="process-stepsub">Field checks & issue closure</span>
              </button>

              <button type="button" class="process-tab" role="tab" aria-selected="false" aria-controls="stepPanel" data-step="5">
                <span class="process-stepnum">06</span>
                <span class="process-steptitle">Handover</span>
                <span class="process-stepsub">Turnover & follow-up</span>
              </button>
            </div>

            <div class="process-panel" id="stepPanel" role="tabpanel" tabindex="0" aria-live="polite">
              <div class="process-panel-top">
                <div class="tag">Step <span id="processStepIndex">01</span></div>
                <h3 id="processTitle">Discovery</h3>
                <p id="processDesc">
                  We start with outcomes: comfort, energy, resilience, schedule and budget. We confirm constraints and define what “success” means with the decision-makers.
                </p>
              </div>

              <div class="process-grid">
                <div class="process-box">
                  <h4>What we clarify</h4>
                  <ul id="processBulletsA"></ul>
                </div>

                <div class="process-box">
                  <h4>What you receive</h4>
                  <ul id="processBulletsB"></ul>
                </div>
              </div>

              <div class="process-cta">
                <a class="btn btn-primary" href="#contact">Start a project conversation</a>
                <a class="btn btn-ghost" href="#services">View services</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Projects -->
      <section id="projects" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>Selected experience</h2>
            <p>
              Representative projects from the founding partners’ combined experience. Client names can be added
              once public references are confirmed.
            </p>
          </header>

          <div class="simple-grid reveal-stagger">
            <article class="simple-card reveal-item">
              <div class="image-frame" data-pan tabindex="0" aria-label="Project image (drag to pan). Press R to reset.">
                <img
                  src="project-multifamily.jpg"
                  alt="Rendering of a high-performance multi-family residential development"
                  class="project-image parallax-layer"
                  loading="lazy"
                  decoding="async"
                />
                <button class="pan-reset" type="button" aria-label="Reset image position">
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="pan-hint" aria-hidden="true">Drag to pan</div>
              </div>
              <h3>High-performance multi-family</h3>
              <p>
                Energy models and incentive submission for a multi-building residential development targeting
                enhanced envelope and mechanical performance, with a focus on occupant comfort and long-term
                operating cost reduction.
              </p>
              <span>Scope: Energy modelling, incentive submission, design advisory, reporting</span>
              <span class="project-outcome">Outcome: Improved tenant comfort and lower projected utility consumption vs. code baseline.</span>
            </article>

            <article class="simple-card reveal-item">
              <div class="image-frame" data-pan tabindex="0" aria-label="Project image (drag to pan). Press R to reset.">
                <img
                  src="project-campus-decarbonization.jpg"
                  alt="Campus buildings included in the decarbonization roadmap"
                  class="project-image parallax-layer"
                  loading="lazy"
                  decoding="async"
                />
                <button class="pan-reset" type="button" aria-label="Reset image position">
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="pan-hint" aria-hidden="true">Drag to pan</div>
              </div>
              <h3>Campus decarbonization roadmap</h3>
              <p>
                Phased electrification and retrofit strategy for an institutional portfolio, aligning carbon
                reduction goals with capital planning, resilience requirements and funding opportunities.
              </p>
              <span>Scope: Baseline analysis, scenario modelling, decarbonization roadmap</span>
              <span class="project-outcome">Outcome: Clear investment plan and sequencing to reduce emissions while managing risk and budget.</span>
            </article>

            <article class="simple-card reveal-item">
              <div class="image-frame" data-pan tabindex="0" aria-label="Project image (drag to pan). Press R to reset.">
                <img
                  src="project-building-performance.jpg"
                  alt="Mechanical systems and plant serving a complex facility"
                  class="project-image parallax-layer"
                  loading="lazy"
                  decoding="async"
                />
                <button class="pan-reset" type="button" aria-label="Reset image position">
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="pan-hint" aria-hidden="true">Drag to pan</div>
              </div>
              <h3>Building performance verification</h3>
              <p>
                Whole-building performance verification for a complex facility, from design reviews through
                functional performance checks, issues tracking and turnover support.
              </p>
              <span>Scope: Building performance plan, field verification, deficiency management</span>
              <span class="project-outcome">Outcome: Verified system operation at turnover and a structured path to resolve outstanding issues.</span>
            </article>

            <article class="simple-card reveal-item">
              <div class="image-frame" data-pan tabindex="0" aria-label="Project image (drag to pan). Press R to reset.">
                <img
                  src="project-retrofit-owners-rep.jpg"
                  alt="Major building undergoing phased retrofit"
                  class="project-image parallax-layer"
                  loading="lazy"
                  decoding="async"
                />
                <button class="pan-reset" type="button" aria-label="Reset image position">
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="pan-hint" aria-hidden="true">Drag to pan</div>
              </div>
              <h3>Owner’s representative – major retrofit</h3>
              <p>
                Independent technical and cost oversight for a multi-phase building renewal, coordinating design,
                construction and operations stakeholders to manage risk and maintain operations.
              </p>
              <span>Scope: Project management, quantity surveying, risk and schedule support</span>
              <span class="project-outcome">Outcome: Reduced delivery risk and clearer decisions on cost, schedule and phasing for the owner.</span>
            </article>

            <article class="simple-card reveal-item">
              <div class="image-frame" data-pan tabindex="0" aria-label="Project image (drag to pan). Press R to reset.">
                <img
                  src="project-defense-facility.jpg"
                  alt="Secure defense and training facility"
                  class="project-image parallax-layer"
                  loading="lazy"
                  decoding="async"
                />
                <button class="pan-reset" type="button" aria-label="Reset image position">
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="pan-hint" aria-hidden="true">Drag to pan</div>
              </div>
              <h3>Secure defense facility upgrades</h3>
              <p>
                Mechanical and building performance advisory services for upgrades to a secure defense facility,
                with focus on resilience, redundancy and operational continuity.
              </p>
              <span>Scope: Mechanical advisory, performance review, phasing input, commissioning support</span>
              <span class="project-outcome">Outcome: Enhanced reliability of critical systems and a coordinated approach to construction in an active facility.</span>
            </article>
          </div>
        </div>
      </section>

      <!-- Team -->
      <section id="team" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>Founding team</h2>
            <p>
              A partner-led practice. Each assignment is supported directly by senior professionals who stay
              engaged from proposal through post-occupancy review.
            </p>
          </header>

          <article class="simple-card company-profile reveal-item">
            <h3>Enthalpy Engineering Incorporated</h3>

            <p>
              <strong>The Start</strong><br />
              Enthalpy was founded after a pattern the partners saw too often on projects:
              performance was treated as a checkbox at the end, instead of a thread that runs
              from concept through operations. They had each spent years in larger organizations,
              leading work where they could see how much better buildings could be when engineers
              were close to owners, contractors and operators the whole way through.
            </p>

            <div class="company-more" id="companyMore" hidden>
              <p>
                Eventually, the question became simple: what if we built a firm that worked that way by design?
                Enthalpy was established as an independent, partner-led practice so decisions could
                be made with long-term building performance in mind, not just short-term project
                milestones. The partners brought different strengths — energy and sustainability,
                building performance, project delivery, design and contract administration — but
                shared one belief: engineering should help create resilient, efficient
                and comfortable buildings that people actually enjoy using.
              </p>

              <p>
                <strong>A team with lived experience</strong><br />
                Our team has worked as consultants, owner’s representatives, operators and builders
                across projects in Canada and the United States. Those perspectives shape how we
                approach every assignment — balancing what owners value, what contractors can build,
                and what operators need long after turnover.
              </p>

              <p>
                <strong>Why “Enthalpy”</strong><br />
                In thermodynamics, enthalpy is a measure of total energy — a reminder that comfort,
                efficiency and performance are all connected, not separate goals. The name Enthalpy
                reflects how we think about buildings: as systems where design decisions, energy use
                and occupant experience are tightly linked. It’s a small technical word that keeps us
                focused on what our work ultimately impacts: how a building feels, performs and endures
                over time.
              </p>

              <p>
                Enthalpy exists in the space where design intent, performance and delivery meet.
                We bring a partner-led, hands-on approach to help our clients move projects from
                concept to comfortable, high-performing buildings.
              </p>
            </div>

            <button
              type="button"
              class="btn btn-ghost btn-sm company-toggle"
              aria-expanded="false"
              aria-controls="companyMore"
            >
              Read full story
            </button>
          </article>

          <div class="team-grid reveal-stagger">
            <article class="team-card reveal-item">
              <div class="team-avatar">
                <img src="ace-glen-garcia.jpg" alt="Ace Glen Garcia headshot" loading="lazy" decoding="async" width="52" height="52" />
              </div>
              <h3>Ace Glen Garcia, P.Eng., PMP, LEED AP, WELL AP, Fitwel Amb.</h3>
              <div class="team-role">Partner – Building Energy Simulation &amp; Sustainability</div>
              <p>
                Specializes in energy modelling, green building certifications and decarbonization strategies for
                complex buildings.
              </p>
            </article>

            <article class="team-card reveal-item">
              <div class="team-avatar">
                <img src="michael-de-guzman.jpg" alt="Michael De Guzman headshot" loading="lazy" decoding="async" width="52" height="52" />
              </div>
              <h3>Michael De&nbsp;Guzman, P.Eng., LEED AP, C.E.M.</h3>
              <div class="team-role">Partner – Building Performance</div>
              <p>
                Focused on building performance, mechanical systems and building operations, ensuring designs
                perform as intended in the field.
              </p>
            </article>

            <article class="team-card reveal-item">
              <div class="team-avatar">
                <img src="marvin-dela-cruz.jpg" alt="Marvin dela Cruz headshot" loading="lazy" decoding="async" width="52" height="52" />
              </div>
              <h3>Marvin dela&nbsp;Cruz, P.Eng., PE, IntPE, APEC Engineer.</h3>
              <div class="team-role">Partner – Project Delivery</div>
              <p>
                Provides project management, quantity surveying, and technical advisory services with an emphasis
                on safety, quality and value.
              </p>
            </article>

            <article class="team-card reveal-item">
              <div class="team-avatar">
                <img src="john-raganit.jpg" alt="John Raganit headshot" loading="lazy" decoding="async" width="52" height="52" />
              </div>
              <h3>John Raganit</h3>
              <div class="team-role">Partner – Design &amp; Contract Administration</div>
              <p>
                Leads design and contract administration services, coordinating engineering deliverables from early
                concept through construction and closeout.
              </p>
            </article>
          </div>
        </div>
      </section>

      <!-- Careers -->
      <section id="careers" class="careers reveal">
        <div class="container careers-inner">
          <div>
            <div class="tag">Careers</div>
            <h2>Grow with a partner-led engineering firm.</h2>
            <p>
              We’re building a practice where engineers, technologists and project professionals can work closely
              with decision-makers, see the full project lifecycle and contribute to better performing buildings.
            </p>
            <ul class="careers-list">
              <li><span class="bullet"></span>Hybrid, flexible work arrangements.</li>
              <li><span class="bullet"></span>Exposure to design, construction and operations.</li>
              <li><span class="bullet"></span>Opportunities to lead projects early in your career.</li>
            </ul>
          </div>

          <div class="contact-card reveal-item">
            <h3>Current opportunities</h3>
            <p>
              We’re always interested in hearing from curious people who care about performance, detail and
              collaboration. Applications are reviewed directly by our partners.
            </p>
            <p class="contact-meta">
              Send your CV and short note to
              <a href="mailto:careers@enthalpyinc.com">careers@enthalpyinc.com</a>.
            </p>
          </div>
        </div>
      </section>

      <!-- Contact -->
      <section id="contact" class="reveal">
        <div class="container">
          <header class="section-header">
            <h2>Contact</h2>
            <p>
              Tell us a bit about your project, portfolio or challenge. We’ll respond with the right partner and
              a suggested next step.
            </p>
          </header>

          <div class="contact-grid">
            <div class="contact-card reveal-item">
              <h3>Project inquiries</h3>
              <p>
                For new projects, proposals or collaborations across Canada and the United States.
              </p>

              <form action="https://formsubmit.co/info@enthalpyinc.com" method="POST">
                <input type="hidden" name="_subject" value="New inquiry from enthalpyinc.com" />
                <input type="hidden" name="_cc" value="john@enthalpyinc.com" />
                <input type="hidden" name="_captcha" value="false" />
                <input type="hidden" name="_next" value="https://enthalpyinc.com/#contact" />

                <input
                  type="text"
                  name="_honey"
                  tabindex="-1"
                  autocomplete="off"
                  aria-hidden="true"
                  style="position:absolute;left:-9999px;"
                />

                <!-- Smart intake fields -->
                <div class="form-grid">
                  <div>
                    <label for="name">Name</label>
                    <input id="name" name="name" type="text" placeholder="Your name" required autocomplete="name" />
                  </div>

                  <div>
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" placeholder="you@example.com" required autocomplete="email" />
                  </div>

                  <div class="span-2">
                    <label for="org">Organization</label>
                    <input id="org" name="organization" type="text" placeholder="Company / organization" autocomplete="organization" />
                  </div>

                  <div>
                    <label for="scope">What are you looking for?</label>
                    <select id="scope" name="scope">
                      <option value="">Select a scope (optional)</option>
                      <option>Design + Contract Administration</option>
                      <option>Building Performance / Verification</option>
                      <option>Energy Management / Optimization</option>
                      <option>Energy Modelling / Incentives</option>
                      <option>Decarbonization Roadmap</option>
                      <option>LEED / WELL / Fitwel Support</option>
                      <option>Project Management / Owner’s Rep</option>
                      <option>Not sure yet</option>
                    </select>
                  </div>

                  <div>
                    <label for="stage">Project stage</label>
                    <select id="stage" name="project_stage">
                      <option value="">Select a stage (optional)</option>
                      <option>Concept / Feasibility</option>
                      <option>Schematic Design</option>
                      <option>Design Development</option>
                      <option>Tender / Procurement</option>
                      <option>Construction</option>
                      <option>Existing building / Operations</option>
                    </select>
                  </div>

                  <div>
                    <label for="location">Location</label>
                    <input id="location" name="project_location" type="text" placeholder="City / region" autocomplete="address-level2" />
                  </div>

                  <div>
                    <label for="timeline">Target timeline</label>
                    <select id="timeline" name="timeline">
                      <option value="">Select a timeline (optional)</option>
                      <option>ASAP / Urgent</option>
                      <option>Next 1–2 months</option>
                      <option>Next 3–6 months</option>
                      <option>6–12 months</option>
                      <option>12+ months</option>
                    </select>
                  </div>

                  <div class="span-2">
                    <label for="message">Project / inquiry</label>
                    <textarea
                      id="message"
                      name="message"
                      placeholder="Briefly describe your project, goals or questions."
                      minlength="30"
                      required
                    ></textarea>

                    <div class="form-actions-row" aria-label="Form helper actions">
                      <button type="button" class="btn btn-ghost btn-sm" id="buildSummaryBtn">Build summary</button>
                      <button type="button" class="btn btn-ghost btn-sm" id="copySummaryBtn">Copy summary</button>
                      <span class="form-helper" id="summaryStatus" role="status" aria-live="polite"></span>
                    </div>

                    <p class="contact-meta" style="margin-top:0.6rem;">
                      We use the information you provide only to respond to your inquiry and to follow up on your project or request.
                    </p>
                  </div>

                  <div class="span-2">
                    <button type="submit" class="btn btn-primary">Send inquiry</button>
                  </div>
                </div>
              </form>
            </div>

            <div>
              <div class="contact-card mb-1_5 reveal-item">
                <h3>Direct contact</h3>
                <p class="contact-meta">
                  General inquiries:
                  <br />
                  <a href="mailto:info@enthalpyinc.com">info@enthalpyinc.com</a>
                  <br /><br />
                  Business development:
                  <br />
                  <a href="mailto:john@enthalpyinc.com">john@enthalpyinc.com</a>
                  <br /><br />
                  Telephone:
                  <br />
                  <a href="tel:+17789452781">+1 778 945 278 81</a>
                </p>
              </div>

              <!-- ===== UPDATED LOCATION CARD (APPLIED) ===== -->
              <div class="contact-card reveal-item location-card">

                <!-- Cinematic office image -->
                <a
                  href="https://www.google.com/maps/search/?api=1&query=Enthalpy+Engineering+Incorporated,+Canada+Place+Business+Centre,+%23404+999+Canada+Place,+Vancouver,+BC+V6C+3E2"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="location-hero-link"
                  aria-label="Open Enthalpy Engineering office location in Google Maps"
                >
                  <div class="location-hero" aria-hidden="true">
                    <img
                      src="office-vancouver-skyline.jpg"
                      alt=""
                      loading="lazy"
                      decoding="async"
                    />
                    <div class="location-hero-overlay"></div>
                    <div class="location-badge">
                      <span class="dot" aria-hidden="true"></span>
                      Vancouver • Canada Place
                    </div>
                  </div>
                </a>

                <h3>Location</h3>
                <p class="contact-meta">
                  Canada Place Business Centre<br />
                  #404 – 999 Canada Place<br />
                  Vancouver, British Columbia V6C 3E2<br /><br />
                  Telephone:
                  <br />
                  <a href="tel:+17789452781">+1 778 945 2781</a>
                  <br /><br />
                  <a
                    href="https://www.google.com/maps/search/?api=1&query=Enthalpy+Engineering+Incorporated,+Canada+Place+Business+Centre,+%23404+999+Canada+Place,+Vancouver,+BC+V6C+3E2"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    View on Google Maps
                  </a>
                </p>

                <div class="map-embed" aria-label="Map showing Enthalpy Engineering Incorporated office location">
                  <iframe
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps?q=Enthalpy+Engineering+Incorporated,+Canada+Place+Business+Centre,+%23404+999+Canada+Place,+Vancouver,+BC+V6C+3E2&output=embed">
                  </iframe>
                </div>
              </div>
              <!-- ===== END UPDATED LOCATION CARD ===== -->

            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container footer-inner">
        <div>
          © <span id="year"></span> Enthalpy Engineering Incorporated. All rights reserved. &nbsp;|&nbsp;
          enthalpyinc.com
        </div>
        <div class="footer-links">
          <a href="#top">Back to top</a>
          <a href="/privacy">Privacy</a>
          <a href="/terms">Terms</a>
          <a href="#" id="cookieSettingsLink">Cookie settings</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Cookie banner / dialog -->
  <div
    class="cookie-banner"
    id="cookieBanner"
    role="dialog"
    aria-modal="true"
    aria-labelledby="cookieBannerTitle"
    aria-describedby="cookieBannerDesc"
  >
    <div class="cookie-banner-inner">
      <div class="cookie-text">
        <p id="cookieBannerTitle" style="font-weight:600; letter-spacing:0.08em; text-transform:uppercase; margin-bottom:0.25rem;">
          Cookie preferences
        </p>
        <p id="cookieBannerDesc">
          We use cookies and similar technologies to understand how our website is used and to improve it.
          You can accept or reject optional analytics.
        </p>
      </div>
      <div class="cookie-actions">
        <button type="button" class="btn btn-primary" id="cookieAccept">Accept analytics</button>
        <button type="button" class="btn btn-ghost" id="cookieReject">Only necessary</button>
        <button type="button" class="btn btn-ghost" id="cookieClose">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Utilities: focus trap for a container
    function trapFocus(container, onDeactivate) {
      const focusablesSelector = [
        'a[href]',
        'button:not([disabled])',
        'textarea:not([disabled])',
        'input:not([disabled])',
        'select:not([disabled])',
        '[tabindex]:not([tabindex="-1"])'
      ].join(',');

      function getFocusables() {
        return Array.from(container.querySelectorAll(focusablesSelector))
          .filter(el => !el.hasAttribute('hidden') && el.offsetParent !== null);
      }

      function handleKeydown(e) {
        if (e.key === 'Escape') {
          onDeactivate?.();
          return;
        }
        if (e.key !== 'Tab') return;

        const focusables = getFocusables();
        if (!focusables.length) return;

        const first = focusables[0];
        const last = focusables[focusables.length - 1];

        if (e.shiftKey && document.activeElement === first) {
          e.preventDefault();
          last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
          e.preventDefault();
          first.focus();
        }
      }

      document.addEventListener('keydown', handleKeydown);
      return () => document.removeEventListener('keydown', handleKeydown);
    }

    // Mobile nav toggle + accessibility
    const navToggle = document.getElementById("navToggle");
    const header = document.querySelector("header");
    const mobileMenu = document.getElementById("mobileMenu");
    const main = document.getElementById("main");
    let navCleanup = null;
    let navPreviousFocus = null;

    function openMobileNav() {
      if (!header || !mobileMenu || !navToggle) return;

      navPreviousFocus = document.activeElement;
      header.classList.add("nav-mobile-open");
      mobileMenu.hidden = false;
      navToggle.setAttribute("aria-expanded", "true");

      if (main) main.inert = true;
      document.body.style.overflow = "hidden";

      const firstLink = mobileMenu.querySelector('a[href]');
      if (firstLink) firstLink.focus();

      if (navCleanup) navCleanup();
      navCleanup = trapFocus(mobileMenu, closeMobileNav);
    }

    function closeMobileNav() {
      if (!header || !mobileMenu || !navToggle) return;

      header.classList.remove("nav-mobile-open");
      mobileMenu.hidden = true;
      navToggle.setAttribute("aria-expanded", "false");

      if (main) main.inert = false;
      document.body.style.overflow = "";

      if (navCleanup) { navCleanup(); navCleanup = null; }

      if (navPreviousFocus && typeof navPreviousFocus.focus === "function") {
        navPreviousFocus.focus();
      }
      navPreviousFocus = null;
    }

    if (navToggle && header && mobileMenu) {
      navToggle.addEventListener("click", () => {
        const isOpen = header.classList.contains("nav-mobile-open");
        if (isOpen) closeMobileNav();
        else openMobileNav();
      });

      mobileMenu.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", () => closeMobileNav());
      });

      window.addEventListener("resize", () => {
        if (window.innerWidth > 880 && header.classList.contains("nav-mobile-open")) {
          closeMobileNav();
        }
      });
    }

    // Year in footer
    document.getElementById("year").textContent = new Date().getFullYear();

    // Respect prefers-reduced-motion + Save-Data for background video
    (function () {
      const video = document.getElementById("bgVideo");
      if (!video) return;

      const motionQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
      const saveData = !!(navigator.connection && navigator.connection.saveData);

      function disableVideo() {
        try { video.pause(); } catch (err) {}
        video.removeAttribute("autoplay");
        video.removeAttribute("loop");
        video.currentTime = 0;
        video.style.display = "none";
      }

      function enableVideo() {
        video.style.display = "";
        video.setAttribute("autoplay", "true");
        video.setAttribute("loop", "true");
        try { video.play(); } catch (err) {}
      }

      function handlePreferences(e) {
        if (saveData || e.matches) disableVideo();
        else enableVideo();
      }

      handlePreferences(motionQuery);

      if (typeof motionQuery.addEventListener === "function") {
        motionQuery.addEventListener("change", handlePreferences);
      } else if (typeof motionQuery.addListener === "function") {
        motionQuery.addListener(handlePreferences);
      }
    })();

    // Scroll reveal – sections
    (function () {
      const revealEls = document.querySelectorAll(".reveal");
      if (!("IntersectionObserver" in window) || !revealEls.length) {
        revealEls.forEach(el => el.classList.add("is-visible"));
        return;
      }

      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.18 }
      );

      revealEls.forEach(el => observer.observe(el));
    })();

    // Scroll reveal – staggered items
    (function () {
      const groups = document.querySelectorAll(".reveal-stagger");
      const items = document.querySelectorAll(".reveal-item");

      if (!("IntersectionObserver" in window) || !items.length) {
        items.forEach(el => el.classList.add("is-visible"));
        return;
      }

      groups.forEach(group => {
        const children = group.querySelectorAll(".reveal-item");
        children.forEach((el, index) => {
          el.style.setProperty("--reveal-delay", `${index * 70}ms`);
        });
      });

      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.18 }
      );

      items.forEach(el => observer.observe(el));
    })();

    // Hero metrics count-up animation
    (function () {
      const panel = document.querySelector(".hero-panel");
      if (!panel || !("IntersectionObserver" in window)) return;

      const values = panel.querySelectorAll(".metric-value");
      if (!values.length) return;

      let hasRun = false;
      const duration = 1200;

      function animate() {
        const startTime = performance.now();

        function step(now) {
          const elapsed = now - startTime;
          const progress = Math.min(elapsed / duration, 1);

          values.forEach(el => {
            const target = Number(el.getAttribute("data-target") || "0");
            const suffix = el.getAttribute("data-suffix") || "";
            const current = Math.round(target * progress);
            el.textContent = suffix ? current + suffix : current;
          });

          if (progress < 1) requestAnimationFrame(step);
        }

        requestAnimationFrame(step);
      }

      const io = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !hasRun) {
              hasRun = true;
              animate();
              io.unobserve(panel);
            }
          });
        },
        { threshold: 0.4 }
      );

      io.observe(panel);
    })();

    // Company story toggle
    (function () {
      const profile = document.querySelector(".company-profile");
      if (!profile) return;

      const more = profile.querySelector(".company-more");
      const toggleBtn = profile.querySelector(".company-toggle");
      if (!more || !toggleBtn) return;

      toggleBtn.addEventListener("click", () => {
        const isHidden = more.hasAttribute("hidden");

        if (isHidden) {
          more.removeAttribute("hidden");
          toggleBtn.textContent = "Hide full story";
          toggleBtn.setAttribute("aria-expanded", "true");
        } else {
          more.setAttribute("hidden", "");
          toggleBtn.textContent = "Read full story";
          toggleBtn.setAttribute("aria-expanded", "false");
          profile.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    })();

    // Services pill animation
    (function () {
      const servicesSection = document.getElementById("services");
      if (!servicesSection) return;

      const pills = servicesSection.querySelectorAll(".pill");
      if (!pills.length) return;

      pills.forEach((pill, index) => {
        pill.style.setProperty("--pill-delay", `${index * 60}ms`);
      });

      if (!("IntersectionObserver" in window)) {
        servicesSection.classList.add("services-pills-visible");
        return;
      }

      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              servicesSection.classList.add("services-pills-visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.3 }
      );

      observer.observe(servicesSection);
    })();

    // Scroll progress bar
    (function () {
      const bar = document.querySelector(".scroll-progress");
      if (!bar) return;

      function update() {
        const scrollTop = window.scrollY || window.pageYOffset || 0;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
        bar.style.width = progress + "%";
      }

      window.addEventListener("scroll", update, { passive: true });
      window.addEventListener("resize", update);
      update();
    })();

    // Spotlight hover (skip if reduced motion)
    (function () {
      const targets = document.querySelectorAll(".card, .simple-card, .team-card, .contact-card");
      if (!targets.length || !("matchMedia" in window)) return;

      const motionQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
      if (motionQuery.matches) return;

      targets.forEach(el => {
        el.addEventListener("pointermove", event => {
          const rect = el.getBoundingClientRect();
          const x = ((event.clientX - rect.left) / rect.width) * 100;
          const y = ((event.clientY - rect.top) / rect.height) * 100;
          el.style.setProperty("--mx", x + "%");
          el.style.setProperty("--my", y + "%");
        }, { passive: true });
      });
    })();

    // Subtle parallax (desktop only, reduced motion aware)
    (function () {
      const layers = document.querySelectorAll(".parallax-layer");
      if (!layers.length || !("matchMedia" in window)) return;

      const motionQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
      const pointerQuery = window.matchMedia("(pointer: fine)");
      const widthQuery = window.matchMedia("(min-width: 900px)");

      function enabled() {
        return !motionQuery.matches && pointerQuery.matches && widthQuery.matches;
      }

      function handleMove(event) {
        if (!enabled()) return;

        const xRatio = (event.clientX / window.innerWidth - 0.5) * 2;
        const yRatio = (event.clientY / window.innerHeight - 0.5) * 2;

        layers.forEach((layer, index) => {
          const depth = 4 + index;
          const translateX = -(xRatio * depth);
          const translateY = -(yRatio * depth * 0.4);
          layer.style.transform = `translate3d(${translateX}px, ${translateY}px, 0)`;
        });
      }

      window.addEventListener("pointermove", handleMove, { passive: true });
    })();

    // ===== Project image panning + reset icon =====
    (function () {
      const frames = document.querySelectorAll(".image-frame[data-pan]");
      if (!frames.length) return;

      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
      const isDefault = (x, y) => Math.abs(x - 50) < 0.1 && Math.abs(y - 50) < 0.1;

      const hintSeenKey = "enthalpy:panHintSeen";

      frames.forEach(frame => {
        const img = frame.querySelector("img.project-image");
        const resetBtn = frame.querySelector(".pan-reset");
        const hint = frame.querySelector(".pan-hint");
        if (!img || !resetBtn) return;

        let dragging = false;
        let startX = 0, startY = 0;
        let posX = 50, posY = 50;

        // Per-image persistence
        const key = "enthalpy:imgpos:" + (img.getAttribute("src") || "");
        const saved = localStorage.getItem(key);
        if (saved) {
          try {
            const { x, y } = JSON.parse(saved);
            if (Number.isFinite(x)) posX = clamp(x, 0, 100);
            if (Number.isFinite(y)) posY = clamp(y, 0, 100);
          } catch {}
        }

        // Apply initial state
        img.style.setProperty("--posx", posX + "%");
        img.style.setProperty("--posy", posY + "%");
        if (!isDefault(posX, posY)) frame.classList.add("is-panned");

        // Hide hint if already seen (site-wide)
        const seen = localStorage.getItem(hintSeenKey) === "1";
        if (hint && seen) hint.style.display = "none";

        function markHintSeen() {
          localStorage.setItem(hintSeenKey, "1");
          if (hint) hint.style.display = "none";
        }

        function setPos(x, y, persist = true) {
          posX = clamp(x, 0, 100);
          posY = clamp(y, 0, 100);
          img.style.setProperty("--posx", posX + "%");
          img.style.setProperty("--posy", posY + "%");

          if (isDefault(posX, posY)) {
            frame.classList.remove("is-panned");
            if (persist) localStorage.removeItem(key);
          } else {
            frame.classList.add("is-panned");
            if (persist) localStorage.setItem(key, JSON.stringify({ x: posX, y: posY }));
          }
        }

        function reset() {
          setPos(50, 50, true);
        }

        resetBtn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          reset();
        });

        // Double-click reset (desktop)
        img.addEventListener("dblclick", () => reset());

        img.addEventListener("pointerdown", (e) => {
          if (e.target && resetBtn.contains(e.target)) return;

          dragging = true;
          img.setPointerCapture(e.pointerId);
          startX = e.clientX;
          startY = e.clientY;
          markHintSeen();
        });

        img.addEventListener("pointermove", (e) => {
          if (!dragging) return;

          const rect = frame.getBoundingClientRect();
          const dx = (e.clientX - startX) / rect.width;
          const dy = (e.clientY - startY) / rect.height;

          const sensitivity = 120;
          setPos(posX + dx * sensitivity, posY + dy * sensitivity, true);

          startX = e.clientX;
          startY = e.clientY;
        });

        const end = () => { dragging = false; };
        img.addEventListener("pointerup", end);
        img.addEventListener("pointercancel", end);
        img.addEventListener("lostpointercapture", end);

        // Keyboard reset support (R key) when frame is focused
        frame.addEventListener("keydown", (e) => {
          if (e.key && e.key.toLowerCase() === "r") reset();
        });
      });
    })();

    /* ===== How we work stepper ===== */
    (function(){
      const section = document.getElementById("process");
      if(!section) return;

      const tabs = Array.from(section.querySelectorAll(".process-tab"));
      const panel = section.querySelector("#stepPanel");
      const elIndex = section.querySelector("#processStepIndex");
      const elTitle = section.querySelector("#processTitle");
      const elDesc  = section.querySelector("#processDesc");
      const elA = section.querySelector("#processBulletsA");
      const elB = section.querySelector("#processBulletsB");
      if(!tabs.length || !panel || !elTitle || !elDesc || !elA || !elB) return;

      const steps = [
        {
          idx: "01",
          title: "Discovery",
          desc: "We start with outcomes: comfort, energy, resilience, schedule and budget. We confirm constraints and define what “success” means with the decision-makers.",
          a: ["Project goals and success metrics", "Schedule, budget and risk drivers", "Stakeholders and decision flow", "Data availability and assumptions"],
          b: ["A scoped approach and recommended next steps", "A clear set of inputs we need (if any)", "A concise summary you can share internally"]
        },
        {
          idx: "02",
          title: "Baseline",
          desc: "We establish a technical baseline: systems, loads, envelope assumptions and utility or modelling inputs—so options can be compared fairly.",
          a: ["Existing conditions or design basis", "Loads and system constraints", "Utility history (if applicable)", "Code / incentive / certification requirements"],
          b: ["Baseline model or performance snapshot", "Constraints + risks list", "A short list of high-value improvement areas"]
        },
        {
          idx: "03",
          title: "Options",
          desc: "We evaluate pathways and make tradeoffs visible: energy, carbon, comfort, constructability and cost—so decisions are grounded and defensible.",
          a: ["System options and control strategies", "Phasing and constructability constraints", "Resilience requirements", "Cost / benefit sensitivity"],
          b: ["Options comparison (clear and decision-ready)", "Recommended pathway with rationale", "Inputs for incentives / reporting as needed"]
        },
        {
          idx: "04",
          title: "Delivery",
          desc: "We coordinate the technical work into buildable documents and align the team—so design intent survives schedules and procurement.",
          a: ["Scope clarity and interfaces", "Coordination across disciplines", "Tender / procurement constraints", "Owner priorities and change control"],
          b: ["Drawings/spec input (as applicable)", "Tender support / addenda responses", "Engineering guidance that stays practical"]
        },
        {
          idx: "05",
          title: "Verification",
          desc: "We verify performance in the field and track issues to closure—protecting owners from ‘paper performance’ and ensuring systems operate as intended.",
          a: ["Field checks and functional expectations", "Deficiency tracking workflows", "Documentation and commissioning interfaces", "Turnover readiness"],
          b: ["Issues log with clear ownership", "Performance verification findings", "Structured closeout support"]
        },
        {
          idx: "06",
          title: "Handover",
          desc: "We support turnover and early operations—so teams can run the building confidently and performance targets remain achievable after occupancy.",
          a: ["Operator needs and training priorities", "Control sequences and setpoints", "Seasonal tuning requirements", "Performance tracking approach"],
          b: ["Turnover guidance + O&M alignment", "Early-operations recommendations", "A path for ongoing optimization"]
        }
      ];

      function render(stepIndex){
        const s = steps[stepIndex] || steps[0];
        if(elIndex) elIndex.textContent = s.idx;
        elTitle.textContent = s.title;
        elDesc.textContent = s.desc;

        elA.innerHTML = "";
        elB.innerHTML = "";
        s.a.forEach(t => {
          const li = document.createElement("li");
          li.textContent = t;
          elA.appendChild(li);
        });
        s.b.forEach(t => {
          const li = document.createElement("li");
          li.textContent = t;
          elB.appendChild(li);
        });
      }

      function setActive(activeTab){
        tabs.forEach(tab=>{
          const isActive = tab === activeTab;
          tab.classList.toggle("is-active", isActive);
          tab.setAttribute("aria-selected", isActive ? "true" : "false");
          tab.setAttribute("tabindex", isActive ? "0" : "-1");
        });
      }

      tabs.forEach((tab)=>{
        tab.addEventListener("click", ()=>{
          const i = Number(tab.getAttribute("data-step") || "0");
          setActive(tab);
          render(i);
          panel.focus({ preventScroll: true });
        });

        tab.addEventListener("keydown", (e)=>{
          const current = tabs.findIndex(t => t.classList.contains("is-active"));
          if(e.key === "ArrowDown" || e.key === "ArrowRight"){
            e.preventDefault();
            const next = tabs[(current + 1) % tabs.length];
            next.click();
            next.focus();
          }
          if(e.key === "ArrowUp" || e.key === "ArrowLeft"){
            e.preventDefault();
            const prev = tabs[(current - 1 + tabs.length) % tabs.length];
            prev.click();
            prev.focus();
          }
          if(e.key === "Home"){
            e.preventDefault();
            tabs[0].click();
            tabs[0].focus();
          }
          if(e.key === "End"){
            e.preventDefault();
            tabs[tabs.length - 1].click();
            tabs[tabs.length - 1].focus();
          }
        });
      });

      render(0);
    })();

    /* ===== Smart intake summary builder ===== */
    (function(){
      const form = document.querySelector('#contact form');
      if(!form) return;

      const els = {
        name: form.querySelector('#name'),
        email: form.querySelector('#email'),
        org: form.querySelector('#org'),
        scope: form.querySelector('#scope'),
        stage: form.querySelector('#stage'),
        location: form.querySelector('#location'),
        timeline: form.querySelector('#timeline'),
        message: form.querySelector('#message'),
        build: form.querySelector('#buildSummaryBtn'),
        copy: form.querySelector('#copySummaryBtn'),
        status: form.querySelector('#summaryStatus')
      };

      if(!els.message || !els.build || !els.copy) return;

      function clean(v){
        return (v || "").toString().trim();
      }

      function buildSummary(){
        const name = clean(els.name?.value);
        const org = clean(els.org?.value);
        const scope = clean(els.scope?.value);
        const stage = clean(els.stage?.value);
        const location = clean(els.location?.value);
        const timeline = clean(els.timeline?.value);

        const existing = clean(els.message.value);

        const lines = [];
        lines.push("Project inquiry — Enthalpy Engineering");
        lines.push("");
        if(name) lines.push(`Contact: ${name}${org ? " — " + org : ""}`);
        if(location) lines.push(`Location: ${location}`);
        if(scope) lines.push(`Scope: ${scope}`);
        if(stage) lines.push(`Stage: ${stage}`);
        if(timeline) lines.push(`Timeline: ${timeline}`);
        lines.push("");
        lines.push("Details / questions:");
        lines.push(existing && existing.length >= 10 ? existing : "•");

        return lines.join("\n");
      }

      function setStatus(text){
        if(!els.status) return;
        els.status.textContent = text;
        window.clearTimeout(setStatus._t);
        setStatus._t = window.setTimeout(()=>{ els.status.textContent = ""; }, 2200);
      }

      els.build.addEventListener("click", ()=>{
        const summary = buildSummary();
        els.message.value = summary;
        setStatus("Summary added.");
        els.message.focus();
      });

      els.copy.addEventListener("click", async ()=>{
        const text = buildSummary();
        try{
          await navigator.clipboard.writeText(text);
          setStatus("Summary copied.");
        }catch(e){
          // Fallback
          els.message.value = text;
          els.message.focus();
          els.message.select();
          try{
            document.execCommand("copy");
            setStatus("Summary copied.");
          }catch(_){
            setStatus("Copy not available—summary inserted.");
          }
        }
      });

      // Optional: auto-suggest summary when user chooses scope/stage/timeline
      [els.scope, els.stage, els.timeline].forEach(sel=>{
        if(!sel) return;
        sel.addEventListener("change", ()=>{
          const v = clean(els.message.value);
          if(v && v.includes("Project inquiry — Enthalpy Engineering")) return;
          if(v.length > 120) return;
          els.message.value = buildSummary();
        });
      });
    })();
  </script>

  <script type="module">
    // Firebase config (public by design). Ensure Firebase rules are locked down server-side.
    const firebaseConfig = {
      apiKey: "AIzaSyBSCtJy6rFTe9dEI5k79V4lvFhs84NhNCw",
      authDomain: "enthalpyinc-e7320.firebaseapp.com",
      projectId: "enthalpyinc-e7320",
      storageBucket: "enthalpyinc-e7320.firebasestorage.app",
      messagingSenderId: "179064554504",
      appId: "1:179064554504:web:c06c7b31906acff907bdbd",
      measurementId: "G-M26KH850Y5"
    };

    const CONSENT_KEY = "enthalpy_cookie_consent";
    let previousFocus = null;
    let cookieCleanup = null;

    async function initAnalytics() {
      if (window._enthalpyAnalytics) return;

      try {
        const { initializeApp } = await import("https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js");
        const { getAnalytics, logEvent } = await import("https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js");

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        logEvent(analytics, "page_view_enthalpy", {
          page_location: window.location.href
        });

        window._enthalpyAnalytics = analytics;
      } catch (err) {
        console.error("Error initializing Firebase Analytics:", err);
      }
    }

    function setDialogMode(isOpen) {
      const main = document.getElementById("main");
      if (main) main.inert = isOpen;
      document.body.style.overflow = isOpen ? "hidden" : "";
    }

    function closeCookieBanner() {
      const banner = document.getElementById("cookieBanner");
      if (banner) banner.style.display = "none";

      setDialogMode(false);

      if (cookieCleanup) { cookieCleanup(); cookieCleanup = null; }

      if (previousFocus && typeof previousFocus.focus === "function") {
        previousFocus.focus();
        previousFocus = null;
      }
    }

    function openCookieBanner() {
      const banner = document.getElementById("cookieBanner");
      const acceptBtn = document.getElementById("cookieAccept");
      const rejectBtn = document.getElementById("cookieReject");
      const closeBtn  = document.getElementById("cookieClose");

      if (!banner || !acceptBtn || !rejectBtn || !closeBtn) return;

      previousFocus = document.activeElement;
      banner.style.display = "block";
      setDialogMode(true);

      const newAcceptBtn = acceptBtn.cloneNode(true);
      const newRejectBtn = rejectBtn.cloneNode(true);
      const newCloseBtn  = closeBtn.cloneNode(true);
      acceptBtn.replaceWith(newAcceptBtn);
      rejectBtn.replaceWith(newRejectBtn);
      closeBtn.replaceWith(newCloseBtn);

      newAcceptBtn.addEventListener("click", () => {
        localStorage.setItem(CONSENT_KEY, "accepted");
        closeCookieBanner();
        initAnalytics();
      });

      newRejectBtn.addEventListener("click", () => {
        localStorage.setItem(CONSENT_KEY, "rejected");
        closeCookieBanner();
      });

      newCloseBtn.addEventListener("click", () => {
        closeCookieBanner();
      });

      if (cookieCleanup) cookieCleanup();
      cookieCleanup = (function trapFocusDialog() {
        const focusablesSelector = [
          'a[href]',
          'button:not([disabled])',
          'textarea:not([disabled])',
          'input:not([disabled])',
          'select:not([disabled])',
          '[tabindex]:not([tabindex="-1"])'
        ].join(',');

        function getFocusables() {
          return Array.from(banner.querySelectorAll(focusablesSelector))
            .filter(el => el.offsetParent !== null);
        }

        function onKeydown(e) {
          if (e.key === "Escape") {
            closeCookieBanner();
            return;
          }
          if (e.key !== "Tab") return;

          const focusables = getFocusables();
          if (!focusables.length) return;

          const first = focusables[0];
          const last = focusables[focusables.length - 1];

          if (e.shiftKey && document.activeElement === first) {
            e.preventDefault();
            last.focus();
          } else if (!e.shiftKey && document.activeElement === last) {
            e.preventDefault();
            first.focus();
          }
        }

        document.addEventListener("keydown", onKeydown);
        return () => document.removeEventListener("keydown", onKeydown);
      })();

      newAcceptBtn.focus();
    }

    document.addEventListener("DOMContentLoaded", () => {
      const existingConsent = localStorage.getItem(CONSENT_KEY);

      if (existingConsent === "accepted") {
        initAnalytics();
      } else if (existingConsent === "rejected") {
        // do nothing
      } else {
        openCookieBanner();
      }

      const cookieSettingsLink = document.getElementById("cookieSettingsLink");
      if (cookieSettingsLink) {
        cookieSettingsLink.addEventListener("click", (event) => {
          event.preventDefault();
          openCookieBanner();
        });
      }
    });
  </script>
</body>
</html>
